# Partitioning
인덱스를 사용해도 검색속도가 느려지는 경우에 대응
- B-Tree 인덱스의 경우 데이터가 많아지면 트리의 Depth가 증가
    - 비교회수가 늘어나면서 검색속도가 느려지는 현상 발생
- Hash 인덱스의 경우 데이터가 많아지면 충돌현상 발생
- 워킹셋(WorkingSet)
    - 전체 테이블에서 **실제 자주 액세스**하는 데이터는 얼마 안됨

---
#### 테이블을 좀더 작은 파티션으로 분할해서 관리 (한 시스템 안에서)
- 필요한 파티션만 선별해서 검색, 업데이트
- 파티션 수를 계속 늘린다고해서 성능이 계속 향상되지는 않음
    - 일정 수의 파티션까지는 성능이 증가
- 제약조건
    - 동일한 스토리지 엔진
    - 외래키 사용 불가 -> 조인 X
    - 전문검색 인덱스, R-Tree 인덱스 사용 불가

## Partition
- Range
    - 연속적인 값을 사용해서 분할
    - ex) Partition1 : [0, 1000), Partition2 : [1000, 2000) ...
- List
    - 이산적인 값을 사용해서 분할
- Hash
    - 해시를 사용해서 분할
    - 데이터가 많아지면 충돌
- Key
    - PK 컬럼이 파티션 키가 됨
    - 해시 파티션과 유사

||파티션 크기 다름|파티션 크기 같음|
|:-:|:-------------:|:------------:|
|파티션 분할/병합|쉬움|어려움|
|종류|Range/List|Hash/Key|
- Linear
    - Linear Hash/Key
    - Global Relocation 현상 완화
        - Power of 2 인접 파티션으로 이동만 허용
    - 파티션 별로 크기가 달라짐
- Consistent Hashing
    - 주로 NoSQL 에서 사용
    - 해시를 사용하면서도 파티션의 크기를 다르게 할 수 있음
    - 파티션 분할/병합에 자유로움
![image](https://user-images.githubusercontent.com/44857109/100533675-68135c00-324a-11eb-8bd7-6e1a55356fc3.png)

